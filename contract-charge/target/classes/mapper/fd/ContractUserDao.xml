<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="zpepdi.system.dao.fd.ContractUserDao">
    <insert id="addContractUser">
        insert into contract_user(`contract_id`, `user_id`, `user_userename`, `user_name`,
                                  `role`, `handler`, `handle_time`)
        values(#{map.id}, #{map.userId}, #{map.username}, #{map.name},
               #{map.role}, #{userId}, now())
    </insert>
    <delete id="delContractUser">
        delete
        from contract_user
        where id = #{id}
    </delete>
    <delete id="delContractUserByRole">
        delete
        from contract_user
        where contract_id = #{id}
        and role = #{role}
    </delete>
    <select id="queryByRole" resultType="java.util.Map">
        select id as uid, user_id as id, user_userename as username, user_name as name
        from contract_user
        where role = #{role}
        and contract_id = #{id}
    </select>
</mapper>